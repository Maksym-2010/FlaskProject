{% extends 'base.html' %}
{% from 'macros.html' import render_input %}

{% block title %}
Main page
{% endblock %}


{% block content %}
    <h1>All posts</h1>
    <a href="/create_post" class="button is-primary">Create new post</a>
    <div class="content">
        {% for post in all_posts %}
            <div class="box">
                <h2 class="title is-4">{{ post.title }}</h2>
                <p>{{ post.content }}</p>
                <a class="button is-link" href="read_post_detail/{{ post.id }}">Read Details</a>
                <a href="update_post/{{ post.id }}" class="button is-warning">Edit Post</a>
                <button class="button is-danger delete-post" data_id="{{ post.id }}">Delete Post</button>
           </div>
           {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function() {
        $(".delete-post").click(function(){
            var postID=$(this).data("id");
            if (confirm("Ви впевнені, що хочете видалити цей пост?")) {
                window.location.href = "/delete_post/" + postID;
            }
        })
    })
</script>
{% endblock %}